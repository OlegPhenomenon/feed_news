  <main class="mt-4 mb-5">
    <div class="container">
      <div class="row">
        <%= form_with url: root_path,
                      method: :get, 
                      data: { 
                        controller: 'debounce',
                        debounce_target: 'form',
                        turbo_action: "advance",
                        turbo_frame: 'posts',
                        action: 'input->debounce#search' 
                            }, class: "divide-y divide-gray-200 space-y-10" do |f| %>

        <%#= f.search_field :title, value: params[:title],
                          class: 'block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0 focus:border-transparent sm:text-sm',
                          placeholder: "#{t('products.index.placeholder')}" %>

        <%= f.select :sort_by, 
                  options_for_select([['Oldest', :published_at_asc],
                                      ['Newest', :published_at_desc]],
                                      selected: session[:published]&.to_sym || :published_at_asc),
                  { }, { class: ''} %>


        <% end %>
                            
      </div>
      <div class="row">
          <% if user_signed_in? && current_user&.pins.present? %>
            <% current_user.pins.order(position: :asc).each do |pin| %>
              <%= render partial: 'post', locals: { post: pin.post, pin: pin } %>
            <% end %>

            <hr>
            <hr>
          <% end %>

        <%= turbo_frame_tag 'posts' do %>
          <% @posts.each do |post| %>
            <%= render partial: 'post', locals: { post: post, pin: nil } %>
          <% end %>
        <% end %>
      </div>
    </div>
  </main>
